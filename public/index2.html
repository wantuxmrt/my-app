<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Система поддержки 1С и МИС</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Все стили из оригинального mock-файла */
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        }

        :root {
            --bg-color: #0f1b2d;
            --panel-bg: #1a2b40;
            --primary: #4a8cff;
            --secondary: #6b4dff;
            --accent: #ff6b8b;
            --text: #e6f1ff;
            --success: #4ade80;
            --warning: #facc15;
            --error: #ff6b6b;
            --bubble-user: #2a4365;
            --bubble-bot: #1e3a5f;
            --edit-color: #facc15;
            --search-bg: rgba(30, 58, 95, 0.7);
            --card-bg: rgba(30, 58, 95, 0.5);
            --filter-bg: rgba(23, 43, 69, 0.8);
            --divider: rgba(74, 140, 255, 0.2);
            --critical: #ff6b6b;
            --high: #ff9e6b;
            --medium: #facc15;
            --low: #4ade80;
            --table-header: #1a2e4a;
            --table-row: rgba(30, 58, 95, 0.3);
            --manager-color: #9b5de5;
        }

        body {
            background: var(--bg-color);
            color: var(--text);
            min-height: 100vh;
            padding: 15px;
            background-image: radial-gradient(circle at 10% 20%, rgba(23, 43, 69, 0.5) 0%, transparent 30%),
                              radial-gradient(circle at 90% 80%, rgba(74, 140, 255, 0.1) 0%, transparent 40%);
            overflow-x: hidden;
        }

        /* Остальные стили... */
        /* [Весь CSS из оригинального mock-файла] */
        
        /* Дополнительные стили для React-приложения */
        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        #root {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body>
    <!-- Контейнер для React-приложения -->
    <div id="root"></div>
    <!-- Подключение React и ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Подключение Babel для JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Инициализация React-приложения -->
    <script type="text/babel">
        // Главный компонент приложения
        function App() {
            const [currentTab, setCurrentTab] = React.useState('my-requests');
            const [isLoggedIn, setIsLoggedIn] = React.useState(false);
            const [user, setUser] = React.useState(null);
            const [viewMode, setViewMode] = React.useState('grid'); // 'grid' или 'list'
            const [tickets, setTickets] = React.useState([]);
            const [currentTicket, setCurrentTicket] = React.useState(null);
            const [filters, setFilters] = React.useState({
                system: 'all',
                status: 'all',
                priority: 'all',
                search: ''
            });
            
            // Модальные окна
            const [showLoginModal, setShowLoginModal] = React.useState(false);
            const [showRegisterModal, setShowRegisterModal] = React.useState(false);
            
            // Фильтрованные тикеты
            const filteredTickets = React.useMemo(() => {
                return tickets.filter(ticket => {
                    if (filters.system !== 'all' && ticket.system !== filters.system) return false;
                    if (filters.status !== 'all' && ticket.status !== filters.status) return false;
                    if (filters.priority !== 'all' && ticket.priority !== filters.priority) return false;
                    if (filters.search) {
                        const searchText = filters.search.toLowerCase();
                        if (!ticket.title.toLowerCase().includes(searchText) && 
                            !ticket.description.toLowerCase().includes(searchText)) {
                            return false;
                        }
                    }
                    return true;
                });
            }, [tickets, filters]);
            
            // Загрузка тикетов
            React.useEffect(() => {
                // Загрузка данных с сервера или из localStorage
                const savedTickets = localStorage.getItem('tickets');
                if (savedTickets) {
                    setTickets(JSON.parse(savedTickets));
                } else {
                    // Тестовые данные
                    const sampleTickets = [
                        {
                            id: 1,
                            system: '1c',
                            category: 'Ошибка',
                            title: 'Ошибка при проведении документа',
                            description: 'При попытке провести документ "Поступление товаров" возникает ошибка "Недостаточно прав".',
                            status: 'in-progress',
                            priority: 'high',
                            created: '2023-05-12T14:30:00',
                            userId: 1,
                            assignedTo: 2,
                            comments: [
                                {
                                    author: 'Алексей Иванов',
                                    time: '2023-05-12T14:35:00',
                                    text: 'Проблема возникает при попытке провести любой документ в разделе "Склад"'
                                },
                                {
                                    author: 'Мария Сидорова',
                                    time: '2023-05-12T15:20:00',
                                    text: 'Проверил права пользователя. Назначил дополнительные права. Попробуйте сейчас.'
                                }
                            ],
                            attachments: []
                        },
                        {
                            id: 2,
                            system: 'mis',
                            category: 'Производительность',
                            title: 'Медленное формирование отчетов',
                            description: 'Формирование ежедневного отчета занимает более 20 минут.',
                            status: 'resolved',
                            priority: 'medium',
                            created: '2023-05-11T09:15:00',
                            userId: 1,
                            assignedTo: 2,
                            comments: [],
                            attachments: []
                        }
                    ];
                    setTickets(sampleTickets);
                    localStorage.setItem('tickets', JSON.stringify(sampleTickets));
                }
            }, []);
            
            // Функции аутентификации
            const handleLogin = (email, password) => {
                // Проверка учетных данных
                if (email === 'admin@example.com' && password === 'admin123') {
                    const userData = {
                        id: 1,
                        name: "Иван Петров",
                        email: "admin@example.com",
                        role: "admin",
                        avatar: "ИП",
                        active: true,
                        organization: "org1",
                        department: "dep1"
                    };
                    setUser(userData);
                    setIsLoggedIn(true);
                    setShowLoginModal(false);
                    return true;
                }
                return false;
            };
            
            const handleLogout = () => {
                setUser(null);
                setIsLoggedIn(false);
            };
            
            // Обработчики фильтров
            const handleFilterChange = (filterName, value) => {
                setFilters(prev => ({
                    ...prev,
                    [filterName]: value
                }));
            };
            
            // Обработчики тикетов
            const handleCreateTicket = (newTicket) => {
                const ticket = {
                    ...newTicket,
                    id: tickets.length + 1,
                    created: new Date().toISOString(),
                    status: 'new',
                    userId: user.id,
                    comments: [],
                    attachments: []
                };
                const updatedTickets = [...tickets, ticket];
                setTickets(updatedTickets);
                localStorage.setItem('tickets', JSON.stringify(updatedTickets));
                setCurrentTab('my-requests');
            };
            
            const handleAddComment = (ticketId, commentText) => {
                if (!commentText.trim()) return;
                
                const updatedTickets = tickets.map(ticket => {
                    if (ticket.id === ticketId) {
                        const newComment = {
                            author: user.name,
                            time: new Date().toISOString(),
                            text: commentText
                        };
                        return {
                            ...ticket,
                            comments: [...ticket.comments, newComment]
                        };
                    }
                    return ticket;
                });
                
                setTickets(updatedTickets);
                localStorage.setItem('tickets', JSON.stringify(updatedTickets));
                
                // Обновляем текущий тикет, если он открыт
                if (currentTicket && currentTicket.id === ticketId) {
                    setCurrentTicket(updatedTickets.find(t => t.id === ticketId));
                }
            };
            
            // Рендер контента в зависимости от вкладки
            const renderContent = () => {
                switch(currentTab) {
                    case 'my-requests':
                        return renderMyRequests();
                    case 'help':
                        return renderHelp();
                    case 'profile':
                        return renderProfile();
                    case 'new-request':
                        return renderCreateRequest();
                    case 'admin':
                        return renderAdminPanel();
                    case 'moderation':
                        return renderModeration();
                    default:
                        return renderMyRequests();
                }
            };
            
            // Рендер списка запросов
            const renderMyRequests = () => {
                if (!isLoggedIn) {
                    return (
                        <div className="no-auth-message">
                            <i className="fas fa-lock"></i>
                            <p>Для просмотра запросов необходимо войти в систему</p>
                            <button className="filter-button" onClick={() => setShowLoginModal(true)}>
                                Войти
                            </button>
                        </div>
                    );
                }
                
                if (filteredTickets.length === 0) {
                    return <div className="no-tickets">Нет запросов по выбранным фильтрам</div>;
                }
                
                if (viewMode === 'list') {
                    return (
                        <table className="requests-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Заголовок</th>
                                    <th>Система</th>
                                    <th>Статус</th>
                                    <th>Приоритет</th>
                                    <th>Дата создания</th>
                                </tr>
                            </thead>
                            <tbody>
                                {filteredTickets.map(ticket => (
                                    <tr key={ticket.id} onClick={() => setCurrentTicket(ticket)}>
                                        <td>#TS-{ticket.id.toString().padStart(4, '0')}</td>
                                        <td>{ticket.title}</td>
                                        <td>
                                            <span className={`request-system system-${ticket.system}`}>
                                                {ticket.system === '1c' ? '1С' : 'МИС'}
                                            </span>
                                        </td>
                                        <td>
                                            <span className={`table-status status-${ticket.status}`}>
                                                {getStatusText(ticket.status)}
                                            </span>
                                        </td>
                                        <td>
                                            <span className={`table-status priority-${ticket.priority}`}>
                                                {getPriorityText(ticket.priority)}
                                            </span>
                                        </td>
                                        <td>{formatDate(ticket.created)}</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    );
                }
                
                return (
                    <div className="requests-grid">
                        {filteredTickets.map(ticket => (
                            <div key={ticket.id} className="request-card" onClick={() => setCurrentTicket(ticket)}>
                                <div className="card-header">
                                    <div className="request-id">#TS-{ticket.id.toString().padStart(4, '0')}</div>
                                    <div className={`request-system system-${ticket.system}`}>
                                        {ticket.system === '1c' ? '1С' : 'МИС'}
                                    </div>
                                </div>
                                <div className="request-title">{ticket.title}</div>
                                <div className="request-description">
                                    {ticket.description.substring(0, 100)}
                                    {ticket.description.length > 100 && '...'}
                                </div>
                                <div className="card-footer">
                                    <div className="request-date">{formatDate(ticket.created)}</div>
                                    <div className={`request-status status-${ticket.status}`}>
                                        {getStatusText(ticket.status)}
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                );
            };
            
            // Рендер раздела помощи
            const renderHelp = () => {
                return (
                    <div className="help-section">
                        <h2><i className="fas fa-question-circle"></i> Помощь и контакты</h2>
                        
                        <h3><i className="fas fa-info-circle"></i> О системе</h3>
                        <p>Система поддержки 1С/МИС предназначена для управления запросами пользователей, связанными с работой программных продуктов 1С и МИС. Здесь вы можете создавать новые запросы, отслеживать их статус, получать помощь от специалистов поддержки.</p>
                        
                        <h3><i className="fas fa-phone-alt"></i> Контакты поддержки</h3>
                        <div className="help-grid">
                            <div className="help-card">
                                <div className="help-card-title"><i className="fas fa-headset"></i> Техническая поддержка</div>
                                <div className="contact-info">
                                    <div className="contact-item">
                                        <div className="contact-icon"><i className="fas fa-phone"></i></div>
                                        <div className="contact-details">
                                            <div className="contact-label">Телефон</div>
                                            <div className="contact-value">+7 (495) 123-45-67</div>
                                        </div>
                                    </div>
                                    <div className="contact-item">
                                        <div className="contact-icon"><i className="fas fa-envelope"></i></div>
                                        <div className="contact-details">
                                            <div className="contact-label">Email</div>
                                            <div className="contact-value">support@mrtexpert.ru</div>
                                        </div>
                                    </div>
                                    <div className="contact-item">
                                        <div className="contact-icon"><i className="fas fa-clock"></i></div>
                                        <div className="contact-details">
                                            <div className="contact-label">Часы работы</div>
                                            <div className="contact-value">Пн-Пт: 9:00 - 18:00</div>
                                            <div className="contact-value">Сб-Вс: выходной</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="help-card">
                                <div className="help-card-title"><i className="fas fa-users"></i> Отдел разработки</div>
                                <div className="contact-info">
                                    <div className="contact-item">
                                        <div className="contact-icon"><i className="fas fa-phone"></i></div>
                                        <div className="contact-details">
                                            <div className="contact-label">Телефон</div>
                                            <div className="contact-value">+7 (495) 765-43-21</div>
                                        </div>
                                    </div>
                                    <div className="contact-item">
                                        <div className="contact-icon"><i className="fas fa-envelope"></i></div>
                                        <div className="contact-details">
                                            <div className="contact-label">Email</div>
                                            <div className="contact-value">dev@mrtexpert.ru</div>
                                        </div>
                                    </div>
                                    <div className="contact-item">
                                        <div className="contact-icon"><i className="fas fa-clock"></i></div>
                                        <div className="contact-details">
                                            <div className="contact-label">Часы работы</div>
                                            <div className="contact-value">Пн-Пт: 10:00 - 19:00</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <h3><i className="fas fa-map-marker-alt"></i> Наш офис</h3>
                        <div className="contact-item">
                            <div className="contact-icon"><i className="fas fa-building"></i></div>
                            <div className="contact-details">
                                <div className="contact-label">Адрес</div>
                                <div className="contact-value">г. Москва, ул. Пушкина, д. 15, офис 305</div>
                            </div>
                        </div>
                        
                        <h3><i className="fas fa-question"></i> Часто задаваемые вопросы</h3>
                        <div className="qa-item">
                            <div className="qa-question"><i className="fas fa-question-circle"></i> Как создать новый запрос?</div>
                            <div className="qa-answer">Перейдите на вкладку "Создать запрос", выберите систему, тип проблемы, категорию и заполните детали запроса.</div>
                        </div>
                        
                        <div className="qa-item">
                            <div className="qa-question"><i className="fas fa-question-circle"></i> Как отслеживать статус моего запроса?</div>
                            <div className="qa-answer">Все ваши запросы отображаются на вкладке "Мои запросы". Там вы можете видеть текущий статус и обновления.</div>
                        </div>
                        
                        <div className="qa-item">
                            <div className="qa-question"><i className="fas fa-question-circle"></i> Что делать, если я забыл пароль?</div>
                            <div className="qa-answer">Обратитесь к администратору вашей организации для сброса пароля.</div>
                        </div>
                        
                        <div className="qa-item">
                            <div className="qa-question"><i className="fas fa-question-circle"></i> Как прикрепить файлы к запросу?</div>
                            <div className="qa-answer">На последнем шаге создания запроса используйте область "Прикрепить файлы".</div>
                        </div>
                    </div>
                );
            };
            
            // Рендер профиля
            const renderProfile = () => {
                if (!isLoggedIn) {
                    return (
                        <div className="no-auth-message">
                            <i className="fas fa-user"></i>
                            <p>Для просмотра профиля необходимо войти в систему</p>
                            <button className="filter-button" onClick={() => setShowLoginModal(true)}>
                                Войти
                            </button>
                        </div>
                    );
                }
                
                return (
                    <div className="profile-container">
                        <div className="profile-header">
                            <div className="profile-avatar">{user.avatar}</div>
                            <h2>{user.name}</h2>
                            <div className="user-role role-admin">{user.role === 'admin' ? 'Администратор' : 'Пользователь'}</div>
                            <div>Организация 1 / Отдел поддержки</div>
                        </div>
                        
                        <div className="profile-stats">
                            <div className="stat-card">
                                <div className="stat-card-value">5</div>
                                <div className="stat-card-label">Всего запросов</div>
                            </div>
                            <div className="stat-card">
                                <div className="stat-card-value">2</div>
                                <div className="stat-card-label">Открытых</div>
                            </div>
                            <div className="stat-card">
                                <div className="stat-card-value">3</div>
                                <div className="stat-card-label">Решенных</div>
                            </div>
                            <div className="stat-card">
                                <div className="stat-card-value">Активен</div>
                                <div className="stat-card-label">Статус аккаунта</div>
                            </div>
                        </div>
                        
                        <h3>Личные данные</h3>
                        <form id="profile-form" className="profile-form">
                            <div className="form-group">
                                <label className="form-label">Имя</label>
                                <input type="text" className="form-input" value={user.name} readOnly />
                            </div>
                            <div className="form-group">
                                <label className="form-label">Email</label>
                                <input type="email" className="form-input" value={user.email} readOnly />
                            </div>
                            <div className="form-group">
                                <label className="form-label">Организация</label>
                                <select className="form-input">
                                    <option>Организация 1</option>
                                    <option>Организация 2</option>
                                    <option>Организация 3</option>
                                </select>
                            </div>
                            <div className="form-group">
                                <label className="form-label">Отдел</label>
                                <select className="form-input">
                                    <option>Отдел поддержки</option>
                                    <option>Бухгалтерия</option>
                                    <option>ИТ отдел</option>
                                    <option>Отдел продаж</option>
                                </select>
                            </div>
                            <div className="form-group">
                                <label className="form-label">Новый пароль</label>
                                <input type="password" className="form-input" placeholder="Оставьте пустым, чтобы не менять" />
                            </div>
                            <div className="form-actions">
                                <button type="submit" className="form-button">
                                    <i className="fas fa-save"></i> Сохранить изменения
                                </button>
                            </div>
                        </form>
                        
                        <div className="quick-actions">
                            <div className="action-button" onClick={() => setCurrentTab('new-request')}>
                                <i className="fas fa-plus-circle"></i>
                                <span>Создать запрос</span>
                            </div>
                            <div className="action-button" onClick={() => setCurrentTab('my-requests')}>
                                <i className="fas fa-ticket-alt"></i>
                                <span>Мои запросы</span>
                            </div>
                            <div className="action-button" onClick={handleLogout}>
                                <i className="fas fa-sign-out-alt"></i>
                                <span>Выйти</span>
                            </div>
                        </div>
                    </div>
                );
            };
            
            // Рендер создания запроса
            const renderCreateRequest = () => {
                if (!isLoggedIn) {
                    return (
                        <div className="no-auth-message">
                            <i className="fas fa-lock"></i>
                            <p>Для создания запроса необходимо войти в систему</p>
                            <button className="filter-button" onClick={() => setShowLoginModal(true)}>
                                Войти
                            </button>
                        </div>
                    );
                }
                
                return (
                    <div>
                        <h2>Создание нового запроса</h2>
                        <div className="flow-header">
                            <div className="flow-step active">
                                <i className="fas fa-server"></i> Выбор системы
                                <i className="fas fa-chevron-right"></i>
                            </div>
                            <div className="flow-step">
                                <i className="fas fa-bug"></i> Тип проблемы
                                <i className="fas fa-chevron-right"></i>
                            </div>
                            <div className="flow-step">
                                <i className="fas fa-folder"></i> Категория
                                <i className="fas fa-chevron-right"></i>
                            </div>
                            <div className="flow-step">
                                <i className="fas fa-info-circle"></i> Детали
                            </div>
                        </div>
                        
                        <div className="flow-content">
                            <h3>Выберите систему, в которой возникла проблема</h3>
                            <div className="system-grid">
                                <div className="system-choice-card">
                                    <i className="fas fa-building"></i>
                                    <div className="system-name">1С</div>
                                    <div className="system-description">Бухгалтерия, ЗУП, ERP и другие</div>
                                </div>
                                <div className="system-choice-card">
                                    <i className="fas fa-hospital"></i>
                                    <div className="system-name">МИС</div>
                                    <div className="system-description">1G Больница и другие медицинские системы</div>
                                </div>
                            </div>
                        </div>
                        
                        <div className="flow-navigation">
                            <button className="back-button" onClick={() => setCurrentTab('my-requests')}>
                                <i className="fas fa-arrow-left"></i> Назад
                            </button>
                        </div>
                    </div>
                );
            };
            
            // Рендер деталей тикета
            const renderTicketDetails = () => {
                if (!currentTicket) return null;
                
                return (
                    <div className="ticket-details">
                        <div className="ticket-header">
                            <div className="ticket-title">
                                {currentTicket.title}
                                <button className="edit-button">
                                    <i className="fas fa-edit"></i> Редактировать
                                </button>
                            </div>
                            <div className="request-id">#TS-{currentTicket.id.toString().padStart(4, '0')}</div>
                        </div>
                        
                        <div className="ticket-meta">
                            <div className="meta-item">
                                <span className="meta-label">Система</span>
                                <span className="meta-value">{currentTicket.system === '1c' ? '1С' : 'МИС'}</span>
                            </div>
                            <div className="meta-item">
                                <span className="meta-label">Статус</span>
                                <span className={`meta-value request-status status-${currentTicket.status}`}>
                                    {getStatusText(currentTicket.status)}
                                </span>
                            </div>
                            <div className="meta-item">
                                <span className="meta-label">Приоритет</span>
                                <span className={`meta-value priority-${currentTicket.priority}`}>
                                    {getPriorityText(currentTicket.priority)}
                                </span>
                            </div>
                            <div className="meta-item">
                                <span className="meta-label">Создан</span>
                                <span className="meta-value">{formatDate(currentTicket.created)}</span>
                            </div>
                        </div>
                        
                        <div className="ticket-description">
                            <h3>Описание проблемы</h3>
                            <div>{currentTicket.description}</div>
                        </div>
                        
                        <div className="comments-section">
                            <h3>Комментарии ({currentTicket.comments.length})</h3>
                            <div className="comment-list">
                                {currentTicket.comments.map((comment, index) => (
                                    <div key={index} className="comment-item">
                                        <div className="comment-header">
                                            <span className="comment-author">{comment.author}</span>
                                            <span className="comment-time">{formatDate(comment.time)}</span>
                                        </div>
                                        <div className="comment-text">{comment.text}</div>
                                    </div>
                                ))}
                            </div>
                            <div className="comment-form">
                                <input 
                                    type="text" 
                                    className="comment-input" 
                                    placeholder="Напишите комментарий..." 
                                    onKeyDown={(e) => {
                                        if (e.key === 'Enter') {
                                            handleAddComment(currentTicket.id, e.target.value);
                                            e.target.value = '';
                                        }
                                    }}
                                />
                                <button className="send-button">
                                    <i className="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div className="back-button" onClick={() => setCurrentTicket(null)}>
                            <i className="fas fa-arrow-left"></i> Назад к списку
                        </div>
                    </div>
                );
            };
            
            // Рендер админ панели
            const renderAdminPanel = () => {
                if (!isLoggedIn || user.role !== 'admin') {
                    return (
                        <div className="admin-denied">
                            <i className="fas fa-ban"></i>
                            <h3>Доступ запрещен</h3>
                            <p>У вас недостаточно прав для доступа к этому разделу</p>
                        </div>
                    );
                }
                
                return (
                    <div>
                        <h2>Панель администратора</h2>
                        <div className="admin-section">
                            <h3>Управление пользователями</h3>
                            <table className="user-table">
                                <thead>
                                    <tr>
                                        <th>Имя</th>
                                        <th>Email</th>
                                        <th>Роль</th>
                                        <th>Статус</th>
                                        <th>Действия</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Иван Петров</td>
                                        <td>admin@example.com</td>
                                        <td>Администратор</td>
                                        <td className="user-status active">Активен</td>
                                        <td>
                                            <button className="user-action-button">
                                                <i className="fas fa-pen"></i> Редактировать
                                            </button>
                                            <button className="user-action-button block">
                                                <i className="fas fa-lock"></i> Заблокировать
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Мария Сидорова</td>
                                        <td>support@example.com</td>
                                        <td>Поддержка</td>
                                        <td className="user-status active">Активен</td>
                                        <td>
                                            <button className="user-action-button">
                                                <i className="fas fa-pen"></i> Редактировать
                                            </button>
                                            <button className="user-action-button block">
                                                <i className="fas fa-lock"></i> Заблокировать
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                );
            };
            
            // Рендер панели модерации
            const renderModeration = () => {
                if (!isLoggedIn || user.role !== 'manager') {
                    return (
                        <div className="admin-denied">
                            <i className="fas fa-ban"></i>
                            <h3>Доступ запрещен</h3>
                            <p>У вас недостаточно прав для доступа к этому разделу</p>
                        </div>
                    );
                }
                
                return (
                    <div className="moderation-section">
                        <h3><i className="fas fa-user-tie"></i> Запросы отдела</h3>
                        <p>Просмотр заявок сотрудников вашего отдела: Отдел поддержки</p>
                        <div className="requests-grid">
                            {filteredTickets.map(ticket => (
                                <div key={ticket.id} className="request-card" onClick={() => setCurrentTicket(ticket)}>
                                    <div className="card-header">
                                        <div className="request-id">#TS-{ticket.id.toString().padStart(4, '0')}</div>
                                        <div className={`request-system system-${ticket.system}`}>
                                            {ticket.system === '1c' ? '1С' : 'МИС'}
                                        </div>
                                    </div>
                                    <div className="request-title">{ticket.title}</div>
                                    <div className="card-footer">
                                        <div className="request-date">{formatDate(ticket.created)}</div>
                                        <div className={`request-status status-${ticket.status}`}>
                                            {getStatusText(ticket.status)}
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };
            
            // Вспомогательные функции
            const getStatusText = (status) => {
                switch (status) {
                    case 'new': return 'Новый';
                    case 'in-progress': return 'В работе';
                    case 'resolved': return 'Решен';
                    case 'reopened': return 'Возвращен';
                    default: return status;
                }
            };
            
            const getPriorityText = (priority) => {
                switch (priority) {
                    case 'critical': return 'Критический';
                    case 'high': return 'Высокий';
                    case 'medium': return 'Средний';
                    case 'low': return 'Низкий';
                    default: return priority;
                }
            };
            
            const formatDate = (dateString) => {
                const date = new Date(dateString);
                return date.toLocaleDateString('ru-RU', {
                    day: '2-digit',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            };
            
            return (
                <div className="app-container">
                    {/* Шапка приложения */}
                    <header className="app-header">
                        <div className="logo">Поддержка 1С/МИС</div>
                        
                        {isLoggedIn ? (
                            <div className="user-info">
                                <div className="user-name">{user.name}</div>
                                <div className={`user-role ${user.role === 'admin' ? 'role-admin' : 'role-user'}`}>
                                    {user.role === 'admin' ? 'Администратор' : 'Пользователь'}
                                </div>
                                <div className="user-avatar">{user.avatar}</div>
                                <button id="logout-btn" onClick={handleLogout}>
                                    <i className="fas fa-sign-out-alt"></i>
                                </button>
                            </div>
                        ) : (
                            <div id="auth-buttons">
                                <button className="auth-btn" onClick={() => setShowLoginModal(true)}>
                                    <i className="fas fa-sign-in-alt"></i> Вход
                                </button>
                                <button className="auth-btn" onClick={() => setShowRegisterModal(true)}>
                                    <i className="fas fa-user-plus"></i> Регистрация
                                </button>
                            </div>
                        )}
                    </header>
                    
                    {/* Навигация */}
                    <div className="tabs-container">
                        {['my-requests', 'moderation', 'admin', 'new-request', 'profile', 'help'].map(tab => (
                            <div 
                                key={tab}
                                className={`tab ${currentTab === tab ? 'active' : ''}`} 
                                onClick={() => setCurrentTab(tab)}
                            >
                                <i className={`fas ${
                                    tab === 'my-requests' ? 'fa-ticket-alt' :
                                    tab === 'moderation' ? 'fa-user-tie' :
                                    tab === 'admin' ? 'fa-cog' :
                                    tab === 'new-request' ? 'fa-plus-circle' :
                                    tab === 'profile' ? 'fa-user' : 'fa-question-circle'
                                }`}></i>
                                {tab === 'my-requests' && 'Мои запросы'}
                                {tab === 'moderation' && 'Модерирование'}
                                {tab === 'admin' && 'Администрирование'}
                                {tab === 'new-request' && 'Создать запрос'}
                                {tab === 'profile' && 'Профиль'}
                                {tab === 'help' && 'Помощь'}
                            </div>
                        ))}
                    </div>
                    
                    {/* Основной контент */}
                    <div className="content-container">
                        {/* Боковая панель (фильтры) */}
                        {currentTab === 'my-requests' && !currentTicket && (
                            <aside className="sidebar">
                                <div className="filters-section">
                                    <div className="section-title">
                                        <i className="fas fa-filter"></i> Фильтры
                                    </div>
                                    
                                    <div className="filter-group">
                                        <label className="filter-label">Система</label>
                                        <select 
                                            className="filter-select" 
                                            value={filters.system}
                                            onChange={(e) => handleFilterChange('system', e.target.value)}
                                        >
                                            <option value="all">Все системы</option>
                                            <option value="1c">1С</option>
                                            <option value="mis">МИС</option>
                                        </select>
                                    </div>
                                    
                                    <div className="filter-group">
                                        <label className="filter-label">Статус</label>
                                        <select 
                                            className="filter-select" 
                                            value={filters.status}
                                            onChange={(e) => handleFilterChange('status', e.target.value)}
                                        >
                                            <option value="all">Все статусы</option>
                                            <option value="new">Новый</option>
                                            <option value="in-progress">В работе</option>
                                            <option value="resolved">Решен</option>
                                            <option value="reopened">Возвращен</option>
                                        </select>
                                    </div>
                                    
                                    <div className="filter-group">
                                        <label className="filter-label">Приоритет</label>
                                        <select 
                                            className="filter-select" 
                                            value={filters.priority}
                                            onChange={(e) => handleFilterChange('priority', e.target.value)}
                                        >
                                            <option value="all">Все приоритеты</option>
                                            <option value="low">Низкий</option>
                                            <option value="medium">Средний</option>
                                            <option value="high">Высокий</option>
                                            <option value="critical">Критический</option>
                                        </select>
                                    </div>
                                    
                                    <div className="search-box">
                                        <i className="fas fa-search search-icon"></i>
                                        <input 
                                            type="text" 
                                            className="search-input" 
                                            placeholder="Поиск по запросам..." 
                                            value={filters.search}
                                            onChange={(e) => handleFilterChange('search', e.target.value)}
                                        />
                                    </div>
                                    
                                    <button className="filter-button">
                                        Применить фильтры
                                    </button>
                                    
                                    <div className="view-toggle">
                                        <button 
                                            className={`view-button ${viewMode === 'grid' ? 'active' : ''}`}
                                            onClick={() => setViewMode('grid')}
                                            title="Плитки"
                                        >
                                            <i className="fas fa-th"></i>
                                        </button>
                                        <button 
                                            className={`view-button ${viewMode === 'list' ? 'active' : ''}`}
                                            onClick={() => setViewMode('list')}
                                            title="Список"
                                        >
                                            <i className="fas fa-list"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div className="filters-section">
                                    <div className="section-title">
                                        <i className="fas fa-chart-pie"></i> Статистика
                                    </div>
                                    
                                    <div className="stat-item">
                                        <div>Всего запросов: <strong>5</strong></div>
                                        <div>Открытые: <strong className="status-in-progress">2</strong></div>
                                        <div>Решенные: <strong className="status-resolved">3</strong></div>
                                        <div>Просроченные: <strong className="status-reopened">0</strong></div>
                                    </div>
                                </div>
                            </aside>
                        )}
                        
                        {/* Основной контент */}
                        <main className="main-content">
                            {currentTicket ? renderTicketDetails() : renderContent()}
                        </main>
                    </div>
                    
                    {/* Модальные окна */}
                    {showLoginModal && (
                        <div className="modal">
                            <div className="modal-content">
                                <div className="modal-header">
                                    <h3 className="modal-title">Вход в систему</h3>
                                    <button className="close-modal" onClick={() => setShowLoginModal(false)}>
                                        &times;
                                    </button>
                                </div>
                                <div className="auth-input-group">
                                    <label className="auth-label">Email</label>
                                    <input 
                                        type="email" 
                                        className="auth-input" 
                                        placeholder="user@mrtexpert.ru"
                                    />
                                </div>
                                <div className="auth-input-group">
                                    <label className="auth-label">Пароль</label>
                                    <input 
                                        type="password" 
                                        className="auth-input" 
                                        placeholder="Ваш пароль"
                                    />
                                </div>
                                <div className="auth-error"></div>
                                <button className="auth-button" onClick={() => handleLogin('admin@example.com', 'admin123')}>
                                    Войти
                                </button>
                            </div>
                        </div>
                    )}
                    
                    {showRegisterModal && (
                        <div className="modal">
                            <div className="modal-content">
                                <div className="modal-header">
                                    <h3 className="modal-title">Регистрация</h3>
                                    <button className="close-modal" onClick={() => setShowRegisterModal(false)}>
                                        &times;
                                    </button>
                                </div>
                                <div className="auth-input-group">
                                    <label className="auth-label">Корпоративная почта</label>
                                    <input 
                                        type="email" 
                                        className="auth-input" 
                                        placeholder="user@mrtexpert.ru"
                                    />
                                </div>
                                <div className="auth-input-group">
                                    <label className="auth-label">Пароль</label>
                                    <input 
                                        type="password" 
                                        className="auth-input" 
                                        placeholder="Придумайте пароль"
                                    />
                                </div>
                                <div className="auth-input-group">
                                    <label className="auth-label">Роль</label>
                                    <select className="auth-input">
                                        <option value="user">Пользователь</option>
                                        <option value="support">Поддержка</option>
                                        <option value="admin">Администратор</option>
                                        <option value="manager">Менеджер</option>
                                    </select>
                                </div>
                                <div className="auth-error"></div>
                                <button className="auth-button">
                                    Зарегистрироваться
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }
        
        // Рендер приложения
        const rootElement = document.getElementById('root');
        const root = ReactDOM.createRoot(rootElement);
        root.render(<App />);
    </script>
</body>
</html>